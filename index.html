<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Clinic Check-In</title>

</head>

<body>
	<div style="width: 500px" id="reader"></div>

<div>
	Clinic Id: <span id="clinicId"></span>
</div>
<div>
	Clinic Name: <span id="clinicName"></span>
</div>
<div>
	Patient Id: <span id="patientId"></span>
</div>

	<!-- your content here... -->
	<script src="js/html5-qrcode.min.js"></script>
	<script type="text/javascript">
		const urlParams = new URLSearchParams(window.location.search);
		const myParam = urlParams.get('caseId');	
		const html5QrCode = new Html5Qrcode("reader");

		const qrCodeSuccessCallback = (decodedText, decodedResult) => {
			let qrCodeData = JSON.parse(decodedText);
			document.getElementById("clinicId").innerHTML = qrCodeData.clinicId;
			document.getElementById("clinicName").innerHTML = qrCodeData.clinicName;
			document.getElementById("patientId").innerHTML = myParam;
		    //html5QrCode.stop();
		};
		const config = { fps: 10, qrbox: 175 };
		html5QrCode.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);
	</script>
</body>
</html>
