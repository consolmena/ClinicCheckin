<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Clinic Check-In</title>

</head>

<body>
	<div style="width: 500px" id="reader"></div>

<div id="data" style="display: inline">
<div>
	Clinic Id: <span id="clinicId"></span>
</div>
<div>
	Clinic Name: <span id="clinicName"></span>
</div>
<div>
	Patient Id: <span id="patientId"></span>
</div>
</div>
	<!-- your content here... -->
	<script src="js/html5-qrcode.min.js"></script>
	<script type="text/javascript">
		const urlParams = new URLSearchParams(window.location.search);
		const myParam = urlParams.get('caseId');	
		const html5QrCode = new Html5Qrcode("reader");

		// enable vibration support
		navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;

		const qrCodeSuccessCallback = (decodedText, decodedResult) => {
			if (navigator.vibrate) {
				window.navigator.vibrate(500);
			}

		    html5QrCode.stop();

			let qrCodeData = JSON.parse(decodedText);
			document.getElementById("clinicId").innerHTML = qrCodeData.clinicId;
			document.getElementById("clinicName").innerHTML = qrCodeData.clinicName;
			document.getElementById("patientId").innerHTML = myParam;

		    document.getElementById("data").style.display = "inline";
			document.getElementById("reader").style.display = "none";
		};
		const config = { fps: 10, qrbox: 400 };
		html5QrCode.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);
	</script>
</body>
</html>
